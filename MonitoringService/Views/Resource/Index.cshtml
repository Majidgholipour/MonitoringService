@{
    ViewBag.Title = "Resource Information";
}

<div class="row">

    <div class="col-md-12">
        <div id="divStudent"></div>
    </div>
</div>
@section Scripts{

    <script src="~/Scripts/jquery.signalR-2.4.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>
    <script type="text/javascript">
        $(function () {
            // Create a proxy to signalr hub on web server. It reference the hub.
            var notifications = $.connection.MyHub;

            // Notify to client with the recent updates from hub that broadcast messages.
            notifications.client.updateInformation = function (serverResponse) {
                //alert('changes triggered by ' + serverResponse + ' operation');
                getInformation();

            };

            // Connect to signalr hub
            $.connection.hub.start().done(function () {
                getInformation();
            }).fail(function (error) {
                alert(error);
            });
        });

        debugger;
        function getInformation() {
            var tblCPU = $('#messagesTableCPU');
            var tblMemory = $('#messagesTableMemory');
            var tblDisk = $('#messagesTableDisk');
            var tblNetwork = $('#messagesTableNetwork');
            $.ajax({
                url: '/Resource/SendNotification',
                contentType: 'application/html ; charset:utf-8',
                type: 'GET',
                dataType: 'html',
                success: function (result) {
                    console.log(result);
                    var a2 = JSON.parse(result);
                    tblCPU.empty();
                    tblMemory.empty();
                    tblDisk.empty();
                    tblNetwork.empty();
                    var i = 1;
                    $.each(a2, function (key, value) {
                        tblCPU.append('<tr>' +
                            '<td>' + value.ServerName + '</td>' +
                            '<td>' + value.CountOfProcessoer + '</td>' +
                            '<td>' + value.Speed + '</td>' +
                            '<td>' + value.UsagePresent + '</td>' +
                            '</tr>');

                        tblMemory.append('<tr>' +

                            '<td>' + value.Avialible + '</td>' +
                            '<td>' + value.Cached + '</td>' +
                            '<td>' + value.Cached + '</td>' +
                            '<td>' + value.InUse + '</td>' +
                            '<td>' + value.Size + '</td>' +
                            '<td>' + value.Usage + '</td>' +
                            '</tr>');

                        tblDisk.append('<tr>' +
                            '<td>' + value.AvailableFreeSpace + '</td>' +
                            '<td>' + value.DrivesInfo + '</td>' +
                            '<td>' + value.TotalFreesize + '</td>' +
                            '<td>' + value.TotalSize + '</td>' +
                            '</tr>');


                        tblNetwork.append('<tr>' +
                            '<td>' + value.AdaptorName + '</td>' +
                            '<td>' + value.DomainName + '</td>' +
                            '<td>' + value.ConnectionType + '</td>' +
                            '<td>' + value.Send + '</td>' +
                            '<td>' + value.Receive + '</td>' +
                            '<td>' + value.IPv4Address + '</td>' +
                            '<td>' + value.IPv6Address + '</td>' +
                          
                            '</tr>');

                        i = i + 1;
                    });
                }
            });
        }
    </script>
}
<div class="container">

    <div class="panel-group">

        <div class="panel panel-default">
            <div class="panel-heading">CPU Information</div>
            <div class="panel-body">
                <div class="list-group">
                    <div>
                        <table id="tab"></table>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <td>ServerName</td>
                                            <td>CountOfProcessoer</td>
                                            <td>Speed</td>
                                            <td>UsagePresent</td>
                                        </tr>
                                    </thead>
                                    <tbody id="messagesTableCPU"></tbody>
                                </table>


                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="panel-group">

        <div class="panel panel-default">
            <div class="panel-heading">Memory Information</div>
            <div class="panel-body">
                <div class="list-group">
                    <div>
                        <table id="tab"></table>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <td>Avialible</td>
                                            <td>Cached</td>
                                            <td>Cached</td>
                                            <td>InUse</td>
                                            <td>Size</td>
                                            <td>Usage</td>
                                        </tr>
                                    </thead>
                                    <tbody id="messagesTableMemory"></tbody>
                                </table>


                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="panel-group">
        <div class="panel panel-default">
            <div class="panel-heading">Disk Information</div>
            <div class="panel-body">
                <div class="list-group">
                    <div>
                        <table id="tab"></table>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>

                                            <td>AvailableFreeSpace</td>
                                            <td>DrivesInfo</td>
                                            <td>TotalFreesize</td>
                                            <td>TotalSize</td>
                                        </tr>
                                    </thead>
                                    <tbody id="messagesTableDisk"></tbody>
                                </table>


                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="panel-group">
        <div class="panel panel-default">
            <div class="panel-heading">Disk Information</div>
            <div class="panel-body">
                <div class="list-group">
                    <div>
                        <table id="tab"></table>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>

                                            <td>AdaptorName</td>
                                            <td>DomainName</td>
                                            <td>ConnectionType</td>
                                            <td>Send</td>
                                            <td>Receive</td>
                                            <td>IPv4Address</td>
                                            <td>IPv6Address</td>

                                        </tr>
                                    </thead>
                                    <tbody id="messagesTableNetwork"></tbody>
                                </table>


                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>